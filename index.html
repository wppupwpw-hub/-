<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>تحويل النص إلى PDF</title>
    <!-- Tailwind CSS CDN for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap');
        body {
            font-family: 'Cairo', sans-serif;
            direction: rtl;
            padding-top: 64px;
        }
        .menu-icon-btn.active .line:nth-child(1) {
            transform: translateY(8px) rotate(45deg);
        }
        .menu-icon-btn.active .line:nth-child(2) {
            opacity: 0;
        }
        .menu-icon-btn.active .line:nth-child(3) {
            transform: translateY(-8px) rotate(-45deg);
        }
    </style>
</head>
<body class="bg-gray-100 flex flex-col items-center min-h-screen">

    <!-- Header Section -->
    <header class="fixed top-0 right-0 left-0 bg-blue-600 shadow-md z-50 p-4 flex items-center justify-between text-white">
        <!-- Menu Button (Hamburger) -->
        <button id="menu-btn" class="menu-icon-btn p-2 rounded-full transition-transform duration-300 transform hover:scale-110 focus:outline-none">
            <div class="line w-6 h-0.5 bg-white my-1 transition-all duration-300"></div>
            <div class="line w-6 h-0.5 bg-white my-1 transition-all duration-300"></div>
            <div class="line w-6 h-0.5 bg-white my-1 transition-all duration-300"></div>
        </button>
        
        <!-- Header Title -->
        <h1 id="header-title" class="text-xl font-bold">تحويل النص إلى PDF</h1>
        
        <!-- Placeholder for symmetry -->
        <div class="w-10"></div>
    </header>

    <!-- Side Menu -->
    <div id="side-menu" class="fixed top-0 right-0 h-full w-64 bg-white shadow-xl z-40 transform translate-x-full transition-transform duration-300 ease-in-out">
        <div class="p-8">
            <h2 id="menu-title" class="text-2xl font-bold text-gray-800 mb-6 border-b pb-4">القائمة الرئيسية</h2>
            <nav class="space-y-4">
                <a href="convert_images_to_pdf.html" id="home-link" class="block text-gray-700 hover:text-blue-600 font-semibold transition-colors duration-200">العودة للصفحة الرئيسية</a>
                <a href="https://roaring-sprite-ab613f.netlify.app/" id="about-link" class="block text-gray-700 hover:text-blue-600 font-semibold transition-colors duration-200">سياسة الخصوصية</a>
                <a href="https://www.facebook.com/mohtech.itz" id="contact-link" target="_blank" class="block text-gray-700 hover:text-blue-600 font-semibold transition-colors duration-200">تواصل معنا</a>
                <a href="#" id="tools-link" class="block text-gray-700 hover:text-blue-600 font-semibold transition-colors duration-200">المزيد من الأدوات</a>
                <a href="#" id="lang-switch-btn" class="block text-gray-700 hover:text-blue-600 font-semibold transition-colors duration-200">تغيير اللغة</a>
            </nav>
        </div>
    </div>

    <!-- Main Content Container -->
    <div class="w-full max-w-2xl mt-8 p-4">
        <div class="bg-white rounded-lg shadow-xl p-8 w-full">
            <div class="text-center mb-6">
                <p id="subtitle" class="text-gray-600 mt-2">اكتب النص الخاص بك هنا لتحويله إلى مستند PDF.</p>
            </div>

            <div class="mb-6">
                <label for="text-input" id="text-label" class="block text-sm font-medium text-gray-700 mb-2">
                    أدخل النص
                </label>
                <textarea id="text-input" class="w-full p-3 rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500" rows="10"></textarea>
            </div>

            <!-- PDF Options -->
            <div class="mb-6">
                <h3 id="options-title" class="text-lg font-semibold text-gray-700 mb-2">خيارات PDF</h3>
                <div class="flex flex-col sm:flex-row sm:space-x-4 sm:space-x-reverse space-y-4 sm:space-y-0">
                    <div>
                        <label for="page-format" id="format-label" class="block text-sm font-medium text-gray-700">حجم الصفحة</label>
                        <select id="page-format" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                            <option value="a4">A4</option>
                            <option value="letter">Letter</option>
                        </select>
                    </div>
                    <div>
                        <label for="page-orientation" id="orientation-label" class="block text-sm font-medium text-gray-700">اتجاه الصفحة</label>
                        <select id="page-orientation" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                            <option value="portrait" id="portrait-option">عمودي</option>
                            <option value="landscape" id="landscape-option">أفقي</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Convert button -->
            <button id="convert-btn" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-lg transition-colors duration-200 shadow-md">
                تحويل إلى PDF
            </button>
            <p id="status-message" class="mt-4 text-center text-gray-500"></p>
        </div>
    </div>

    <!-- jspdf library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const menuBtn = document.getElementById('menu-btn');
            const sideMenu = document.getElementById('side-menu');
            const langSwitchBtn = document.getElementById('lang-switch-btn');

            const elements = {
                headerTitle: document.getElementById('header-title'),
                subtitle: document.getElementById('subtitle'),
                menuTitle: document.getElementById('menu-title'),
                homeLink: document.getElementById('home-link'),
                aboutLink: document.getElementById('about-link'),
                contactLink: document.getElementById('contact-link'),
                toolsLink: document.getElementById('tools-link'),
                textLabel: document.getElementById('text-label'),
                optionsTitle: document.getElementById('options-title'),
                formatLabel: document.getElementById('format-label'),
                orientationLabel: document.getElementById('orientation-label'),
                portraitOption: document.getElementById('portrait-option'),
                landscapeOption: document.getElementById('landscape-option'),
                convertBtn: document.getElementById('convert-btn'),
                statusMessage: document.getElementById('status-message'),
            };

            const translations = {
                ar: {
                    direction: 'rtl',
                    title: 'تحويل النص إلى PDF',
                    subtitle: 'اكتب النص الخاص بك هنا لتحويله إلى مستند PDF.',
                    menuTitle: 'القائمة الرئيسية',
                    homeLink: 'العودة للصفحة الرئيسية',
                    aboutLink: 'سياسة الخصوصية',
                    contactLink: 'تواصل معنا',
                    toolsLink: 'المزيد من الأدوات',
                    langSwitchBtn: 'تغيير اللغة',
                    textLabel: 'أدخل النص',
                    optionsTitle: 'خيارات PDF',
                    formatLabel: 'حجم الصفحة',
                    orientationLabel: 'اتجاه الصفحة',
                    portraitOption: 'عمودي',
                    landscapeOption: 'أفقي',
                    convertBtn: 'تحويل إلى PDF',
                    noTextMessage: 'الرجاء إدخال بعض النص لتحويله.',
                    convertingMessage: 'يتم التحويل... الرجاء الانتظار.',
                    conversionSuccessMessage: 'تم التحويل بنجاح! يتم تنزيل ملف PDF.'
                },
                en: {
                    direction: 'ltr',
                    title: 'Text to PDF Converter',
                    subtitle: 'Type your text here to convert it into a PDF document.',
                    menuTitle: 'Main Menu',
                    homeLink: 'Back to Home',
                    aboutLink: 'Privacy Policy',
                    contactLink: 'Contact Us',
                    toolsLink: 'More Tools',
                    langSwitchBtn: 'Change Language',
                    textLabel: 'Enter Text',
                    optionsTitle: 'PDF Options',
                    formatLabel: 'Page Size',
                    orientationLabel: 'Page Orientation',
                    portraitOption: 'Portrait',
                    landscapeOption: 'Landscape',
                    convertBtn: 'Convert to PDF',
                    noTextMessage: 'Please enter some text to convert.',
                    convertingMessage: 'Converting... Please wait.',
                    conversionSuccessMessage: 'Conversion successful! Downloading PDF file.'
                }
            };

            let currentLang = 'ar';

            const updateText = (lang) => {
                document.documentElement.lang = lang;
                document.body.style.direction = translations[lang].direction;
                document.title = translations[lang].title;
                elements.headerTitle.textContent = translations[lang].title;
                elements.subtitle.textContent = translations[lang].subtitle;
                elements.menuTitle.textContent = translations[lang].menuTitle;
                elements.homeLink.textContent = translations[lang].homeLink;
                elements.aboutLink.textContent = translations[lang].aboutLink;
                elements.contactLink.textContent = translations[lang].contactLink;
                elements.toolsLink.textContent = translations[lang].toolsLink;
                langSwitchBtn.textContent = translations[lang].langSwitchBtn;
                elements.textLabel.textContent = translations[lang].textLabel;
                elements.optionsTitle.textContent = translations[lang].optionsTitle;
                elements.formatLabel.textContent = translations[lang].formatLabel;
                elements.orientationLabel.textContent = translations[lang].orientationLabel;
                elements.portraitOption.textContent = translations[lang].portraitOption;
                elements.landscapeOption.textContent = translations[lang].landscapeOption;
                elements.convertBtn.textContent = translations[lang].convertBtn;
                elements.statusMessage.textContent = '';
            };

            menuBtn.addEventListener('click', () => {
                sideMenu.classList.toggle('translate-x-full');
                menuBtn.classList.toggle('active');
            });
            
            langSwitchBtn.addEventListener('click', (e) => {
                e.preventDefault();
                currentLang = currentLang === 'ar' ? 'en' : 'ar';
                updateText(currentLang);
                sideMenu.classList.add('translate-x-full');
                menuBtn.classList.remove('active');
            });

            const textInput = document.getElementById('text-input');
            const convertBtn = document.getElementById('convert-btn');
            const statusMessage = document.getElementById('status-message');
            const pageFormat = document.getElementById('page-format');
            const pageOrientation = document.getElementById('page-orientation');

            convertBtn.addEventListener('click', async () => {
                const text = textInput.value.trim();
                if (text.length === 0) {
                    statusMessage.textContent = translations[currentLang].noTextMessage;
                    return;
                }

                statusMessage.textContent = translations[currentLang].convertingMessage;
                convertBtn.disabled = true;

                const { jsPDF } = window.jspdf;
                const doc = new jsPDF({
                    orientation: pageOrientation.value === 'landscape' ? 'l' : 'p',
                    unit: 'mm',
                    format: pageFormat.value,
                });

                // Add text with styling and handle line breaks
                const splitText = doc.splitTextToSize(text, doc.internal.pageSize.getWidth() - 20); // 20mm padding
                doc.text(splitText, 10, 10);

                doc.save('converted-text.pdf');
                statusMessage.textContent = translations[currentLang].conversionSuccessMessage;
                convertBtn.disabled = false;
            });
        });
    </script>
</body>
</html>
